{"version":3,"sources":["webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?104d","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?1592","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/send-request.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/url.js","webpack://CMSBrowserComponents/../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?818a"],"names":["appId","method","endpoint","body","fetch","url","headers","cache","credentials","JSON","stringify"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAA+F;AAC3B;AACL;;;AAG/D;AACgF;AAChF,gBAAgB,8FAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA,wCAAoK,CAAgB,gOAAG,EAAC,C;;;;;;;;;;;;ACAxL;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAEe;AAAA,MACbA,KADa,QACbA,KADa;AAAA,MAEbC,MAFa,QAEbA,MAFa;AAAA,MAGbC,QAHa,QAGbA,QAHa;AAAA,MAIbC,IAJa,QAIbA,IAJa;AAAA,SAKTC,KAAK,WAAIC,4CAAJ,SAAUH,QAAV;AACTD,UAAM,EAANA,MADS;AAETK,WAAO;AACL,uBAAiBN,KADZ;AAEL,0BAAoB;AAFf,OAGDG,IAAI,IAAI;AAAE,sBAAgB;AAAlB,KAHP,CAFE;AAOTI,SAAK,EAAE,UAPE;AAQTC,eAAW,EAAE;AARJ,KASLL,IAAI,IAAI;AAAEA,QAAI,EAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf;AAAR,GATH,EALI;AAAA,CAAf,E;;;;;;;;;;;;ACFA;AAAe,qFAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKA;AAEA;AACA,sBADA;AAGA;AACA;AACA,kBADA;AAEA;AAFA,KADA;AAKA;AACA,iBADA;AAEA;AAAA,gBACA;AAAA;AAAA;AAAA,SADA,EAEA;AAAA;AAAA;AAAA,SAFA,EAGA;AAAA;AAAA;AAAA,SAHA,EAIA;AAAA;AAAA;AAAA,SAJA,EAKA;AAAA;AAAA;AAAA,SALA,EAMA;AAAA;AAAA;AAAA,SANA,EAOA;AAAA;AAAA;AAAA,SAPA,EAQA;AAAA;AAAA;AAAA,SARA;AAAA;AAFA,KALA;;AAkBA;;;AAGA;AACA,iBADA;AAEA;AAAA;AAAA;AAFA;AArBA,GAHA;AA8BA;AACA,UADA,oBACA;AACA,yHACA,mBADA,qGAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFA;AAIA;AANA,GA9BA;AAuCA,SAvCA,qBAuCA;AAAA;;AACA;AAAA;AAAA;AAAA;AAAA;;AACA;AACA,6BADA;AAEA;AAFA;;AAKA,8BACA,MADA,CACA;AAAA;AAAA;AAAA,OADA,EAEA,MAFA,CAEA;AAAA;AAAA;AAAA;AAAA,OAFA,EAEA;AACA,0GADA;AAEA;AAFA,OAFA;;AAOA;AACA,kBADA;AAEA;AAAA;AAAA,SAFA;AAGA;AAAA;AAAA;AAHA;;AAMA;AACA;AACA,4BADA;AAEA,wBAFA;AAGA,6CAHA;AAIA;AAJA;AAMA;AACA,KA3BA;AA4BA,GApEA;AAsEA;AACA,mBADA,2BACA,QADA,EACA,IADA,EACA;AACA;AACA;AACA;AACA;AALA;AAtEA,G;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,GAAG;AACH;AACA;AACA","file":"marko-web-radix-inquiry-listener.9ad402a3.js","sourcesContent":["import { render, staticRenderFns } from \"./inquiry-listener.vue?vue&type=template&id=3a6f878e&\"\nimport script from \"./inquiry-listener.vue?vue&type=script&lang=js&\"\nexport * from \"./inquiry-listener.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/root/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3a6f878e')) {\n      api.createRecord('3a6f878e', component.options)\n    } else {\n      api.reload('3a6f878e', component.options)\n    }\n    module.hot.accept(\"./inquiry-listener.vue?vue&type=template&id=3a6f878e&\", function () {\n      api.rerender('3a6f878e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue\"\nexport default component.exports","import mod from \"-!../../../babel-loader/lib/index.js??ref--1!../../../vue-loader/lib/index.js??vue-loader-options!./inquiry-listener.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../babel-loader/lib/index.js??ref--1!../../../vue-loader/lib/index.js??vue-loader-options!./inquiry-listener.vue?vue&type=script&lang=js&\"","export * from \"-!../../../vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../vue-loader/lib/index.js??vue-loader-options!./inquiry-listener.vue?vue&type=template&id=3a6f878e&\"","import url from './url';\n\nexport default ({\n  appId,\n  method,\n  endpoint,\n  body,\n}) => fetch(`${url}${endpoint}`, {\n  method,\n  headers: {\n    'x-radix-appid': appId,\n    'x-requested-with': 'XMLHttpRequest',\n    ...(body && { 'content-type': 'application/json' }),\n  },\n  cache: 'no-cache',\n  credentials: 'same-origin',\n  ...(body && { body: JSON.stringify(body) }),\n});\n","export default 'https://radix.as3.io';\n","<template>\n  <div class=\"radix-inquiry-listener\" :data-app-id=\"appId\" />\n</template>\n\n<script>\nimport sendRequest from './send-request';\n\nexport default {\n  inject: ['EventBus'],\n\n  props: {\n    appId: {\n      type: String,\n      required: true,\n    },\n    standardFields: {\n      type: Array,\n      default: () => [\n        { name: 'firstName', radix: 'identity:givenName' },\n        { name: 'lastName', radix: 'identity:familyName' },\n        { name: 'email', radix: 'identity:primaryEmail' },\n        { name: 'phone', radix: 'identity:primaryPhone.number' },\n        { name: 'company', radix: 'identity:companyName' },\n        { name: 'jobTitle', radix: 'identity:title' },\n        { name: 'postalCode', radix: 'identity:primaryAddress.postalCode' },\n        { name: 'country', radix: 'identity:primaryAddress.countryCode' },\n      ],\n    },\n    /**\n     * e.g. [{ name: 'comments', id: '57e55318bcf2d6f3c30e0833' }]\n     */\n    submissionFieldIds: {\n      type: Array,\n      default: () => [],\n    },\n  },\n\n  computed: {\n    fields() {\n      return [\n        ...this.standardFields,\n        ...this.submissionFieldIds.filter(f => f.id).map(f => ({ name: f.name, radix: `submission:answers.${f.id}` })),\n      ];\n    },\n  },\n\n  created() {\n    this.EventBus.$on('inquiry-form-submit', ({ contentId, contentType, payload } = {}) => {\n      const model = {\n        identifier: contentId,\n        type: `content-${contentType}`,\n      };\n\n      const data = this.fields\n        .filter(({ name }) => payload[name])\n        .reduce((o, { name, radix }) => ({ ...o, [radix]: payload[name] }), {\n          'submission:referringHost': `${window.location.protocol}//${window.location.host}`,\n          'submission:referringHref': window.location.href,\n        });\n\n      const body = {\n        data,\n        meta: { model },\n        notify: { enabled: false },\n      };\n\n      if (model.identifier && model.type) {\n        sendRequest({\n          appId: this.appId,\n          method: 'POST',\n          endpoint: '/app/submission/inquiry',\n          body,\n        });\n      }\n    });\n  },\n\n  methods: {\n    getElementValue(elements, name) {\n      const element = elements[name];\n      if (!element) return undefined;\n      return element.value;\n    },\n  },\n};\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", {\n    staticClass: \"radix-inquiry-listener\",\n    attrs: { \"data-app-id\": _vm.appId }\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}