{"version":3,"sources":["webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?9cf6","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?0acd","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/send-request.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/url.js","webpack://CMSBrowserComponents/../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?06ac"],"names":["appId","method","endpoint","body","fetch","url","headers","cache","credentials","JSON","stringify"],"mappings":";;;;;;;;;AAAA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA,uC;;;;;;;;;;;AC9BA;AACA;AACA;;AAEA,kC;;;;;;;;;;;ACJA,qBAAqB,mBAAO,CAAC,qFAAkB;;AAE/C,2BAA2B,mBAAO,CAAC,iGAAwB;;AAE3D,sBAAsB,mBAAO,CAAC,uFAAmB;;AAEjD;AACA;AACA;;AAEA,gC;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAgG;AAC3B;AACL;;;AAGhE;AACgF;AAChF,gBAAgB,8FAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA,wCAAqK,CAAgB,iOAAG,EAAC,C;;;;;;;;;;;;ACAzL;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAEe;AAAA,MACbA,KADa,QACbA,KADa;AAAA,MAEbC,MAFa,QAEbA,MAFa;AAAA,MAGbC,QAHa,QAGbA,QAHa;AAAA,MAIbC,IAJa,QAIbA,IAJa;AAAA,SAKTC,KAAK,WAAIC,4CAAJ,SAAUH,QAAV;AACTD,UAAM,EAANA,MADS;AAETK,WAAO;AACL,uBAAiBN,KADZ;AAEL,0BAAoB;AAFf,OAGDG,IAAI,IAAI;AAAE,sBAAgB;AAAlB,KAHP,CAFE;AAOTI,SAAK,EAAE,UAPE;AAQTC,eAAW,EAAE;AARJ,KASLL,IAAI,IAAI;AAAEA,QAAI,EAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf;AAAR,GATH,EALI;AAAA,CAAf,E;;;;;;;;;;;;ACFA;AAAe,qFAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKA;AAEA;AACA,sBADA;AAGA;AACA;AACA,kBADA;AAEA;AAFA;AADA,GAHA;AAUA;AAAA;AACA;AADA;AAAA,GAVA;AAcA,SAdA,qBAcA;AACA;AACA,GAhBA;AAkBA;AACA,SADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEA,qBAFA,GAEA,yBAFA;;AAAA,qBAGA,KAHA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAIA;AACA,mCADA;AAEA,+BAFA;AAGA;AAHA,kBAJA;;AAAA;AAIA,mBAJA;AAAA;AAAA,uBASA,UATA;;AAAA;AASA,oBATA;AAAA,uBAUA,UAVA,EAUA,QAVA,QAUA,QAVA;AAWA;;AACA;AACA;AACA;;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAiBA,sBAjBA,gCAiBA;AAAA;;AACA;AACA;AAEA;;AACA;AACA;;AADA,8BAEA;AAAA;AAAA,UAFA;AAAA;AAAA,YAEA,GAFA;AAAA,YAEA,KAFA;;AAGA;AACA;AACA;AACA;;AACA;AACA,KA9BA;AA+BA,UA/BA,kBA+BA,KA/BA,EA+BA;AACA;AACA,KAjCA;AAkCA,UAlCA,kBAkCA,KAlCA,EAkCA;AACA;AACA;AApCA;AAlBA,G;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,GAAG;AACH;AACA;AACA","file":"marko-web-radix-identity-detector.18f9cf91.js","sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","import { render, staticRenderFns } from \"./identity-detector.vue?vue&type=template&id=4076c774&\"\nimport script from \"./identity-detector.vue?vue&type=script&lang=js&\"\nexport * from \"./identity-detector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/root/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4076c774')) {\n      api.createRecord('4076c774', component.options)\n    } else {\n      api.reload('4076c774', component.options)\n    }\n    module.hot.accept(\"./identity-detector.vue?vue&type=template&id=4076c774&\", function () {\n      api.rerender('4076c774', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue\"\nexport default component.exports","import mod from \"-!../../../babel-loader/lib/index.js??ref--1!../../../vue-loader/lib/index.js??vue-loader-options!./identity-detector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../babel-loader/lib/index.js??ref--1!../../../vue-loader/lib/index.js??vue-loader-options!./identity-detector.vue?vue&type=script&lang=js&\"","export * from \"-!../../../vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../vue-loader/lib/index.js??vue-loader-options!./identity-detector.vue?vue&type=template&id=4076c774&\"","import url from './url';\n\nexport default ({\n  appId,\n  method,\n  endpoint,\n  body,\n}) => fetch(`${url}${endpoint}`, {\n  method,\n  headers: {\n    'x-radix-appid': appId,\n    'x-requested-with': 'XMLHttpRequest',\n    ...(body && { 'content-type': 'application/json' }),\n  },\n  cache: 'no-cache',\n  credentials: 'same-origin',\n  ...(body && { body: JSON.stringify(body) }),\n});\n","export default 'https://radix.as3.io';\n","<template>\n  <div class=\"radix-identity-detector\" :data-app-id=\"appId\" />\n</template>\n\n<script>\nimport sendRequest from './send-request';\n\nexport default {\n  inject: ['EventBus'],\n\n  props: {\n    appId: {\n      type: String,\n      required: true,\n    },\n  },\n\n  data: () => ({\n    identityKey: 'ident[pull]',\n  }),\n\n  created() {\n    this.track();\n  },\n\n  methods: {\n    async track() {\n      const ident = this.parseIdentityValue();\n      if (ident) {\n        const res = await sendRequest({\n          appId: this.appId,\n          method: 'GET',\n          endpoint: `/app/auth?${this.encode(this.identityKey)}=${this.encode(ident)}`,\n        });\n        const json = await res.json();\n        const { identity } = json || {};\n        this.EventBus.$emit('radix-identity-detected', identity);\n        if (window.Sapience && identity) {\n          window.Sapience.Tracker.setIdentity(identity);\n        }\n      }\n    },\n    parseIdentityValue() {\n      const search = window.location.search.replace(/(^\\?)/, '');\n      const pairs = search.split('&');\n\n      let ident;\n      for (let i = 0; i < pairs.length; i += 1) {\n        const pair = pairs[i];\n        const [key, value] = pair.split('=').map(v => this.decode(v));\n        if (key === `rdx.${this.identityKey}` && value) {\n          ident = value;\n        }\n      }\n      return ident;\n    },\n    decode(value) {\n      return decodeURIComponent(value);\n    },\n    encode(value) {\n      return encodeURIComponent(value);\n    },\n  },\n};\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", {\n    staticClass: \"radix-identity-detector\",\n    attrs: { \"data-app-id\": _vm.appId }\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}