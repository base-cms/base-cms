{"version":3,"sources":["webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/construct.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/inherits.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://CMSBrowserComponents//root/node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/errors/feature.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/errors/logout.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/logout.vue","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/logout.vue?8f3b","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/logout.vue?dd37","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/utils/clean-path.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/utils/cookies-enabled.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/utils/get-referring-page.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/utils/post.js","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/utils/redirect.js","webpack://CMSBrowserComponents/../../node_modules/@base-cms/marko-web-identity-x/browser/logout.vue","webpack://CMSBrowserComponents//root/node_modules/@base-cms/marko-web-identity-x/browser/logout.vue?f07e"],"names":["FeatureError","message","code","name","Error","LogoutError","value","replace","document","cookie","created","indexOf","e","module","exports","referrer","window","origin","path","body","endpoint","uri","fetch","credentials","method","headers","JSON","stringify","undefined","to","cleanPath","url","location"],"mappings":"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","file":"vendors~identity-x-logout.f0968316.js","sourcesContent":["function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","export default class FeatureError extends Error {\n  constructor(message, code = 400) {\n    super(message);\n    this.name = 'FeatureError';\n    this.code = code;\n  }\n}\n","export default class LogoutError extends Error {\n  constructor(message, code = 500) {\n    super(message);\n    this.name = 'LogoutError';\n    this.code = code;\n  }\n}\n","import { render, staticRenderFns } from \"./logout.vue?vue&type=template&id=238c6c0c&\"\nimport script from \"./logout.vue?vue&type=script&lang=js&\"\nexport * from \"./logout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/root/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('238c6c0c')) {\n      api.createRecord('238c6c0c', component.options)\n    } else {\n      api.reload('238c6c0c', component.options)\n    }\n    module.hot.accept(\"./logout.vue?vue&type=template&id=238c6c0c&\", function () {\n      api.rerender('238c6c0c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"node_modules/@base-cms/marko-web-identity-x/browser/logout.vue\"\nexport default component.exports","import mod from \"-!../../../babel-loader/lib/index.js??ref--1!../../../vue-loader/lib/index.js??vue-loader-options!./logout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../babel-loader/lib/index.js??ref--1!../../../vue-loader/lib/index.js??vue-loader-options!./logout.vue?vue&type=script&lang=js&\"","export * from \"-!../../../vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../vue-loader/lib/index.js??vue-loader-options!./logout.vue?vue&type=template&id=238c6c0c&\"","export default value => value.replace(/^\\/+/, '');\n","export default () => {\n  try {\n    document.cookie = 'cookietest=1';\n    const created = document.cookie.indexOf('cookietest=') !== -1;\n    document.cookie = 'cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT';\n    return created;\n  } catch (e) {\n    return false;\n  }\n};\n","module.exports = () => {\n  const { referrer } = document;\n  const { origin } = window;\n  if (!referrer) return '/'; // no referrer\n  if (referrer.indexOf(origin) !== 0) return '/'; // off-site referrer\n  return referrer.replace(origin, '');\n};\n","export default (path, body) => {\n  const endpoint = path.replace(/^\\/+/, '');\n  const uri = `/__idx/${endpoint}`;\n  return fetch(uri, {\n    credentials: 'same-origin',\n    method: 'post',\n    headers: { 'content-type': 'application/json' },\n    body: body ? JSON.stringify(body) : undefined,\n  });\n};\n","import cleanPath from './clean-path';\n\nexport default (to) => {\n  const path = cleanPath(to);\n  const url = `${window.location.origin}/${path}`;\n  window.location.replace(url);\n};\n","<template>\n  <div v-if=\"error\">\n    <p>{{ error }}</p>\n  </div>\n  <div v-else>\n    <p>Logging out...</p>\n  </div>\n</template>\n\n<script>\nimport redirect from './utils/redirect';\nimport getReferringPage from './utils/get-referring-page';\nimport cookiesEnabled from './utils/cookies-enabled';\nimport post from './utils/post';\nimport LogoutError from './errors/logout';\nimport FeatureError from './errors/feature';\n\nexport default {\n  props: {\n    redirectTo: {\n      type: String,\n      default: null,\n    },\n  },\n  data: () => ({\n    error: null,\n  }),\n  mounted() {\n    if (cookiesEnabled()) {\n      this.logout();\n    } else {\n      const error = new FeatureError('Your browser does not support cookies. Please enable cookies to use this feature.');\n      this.error = error.message;\n    }\n  },\n  methods: {\n    /**\n     *\n     */\n    async logout() {\n      this.error = null;\n      try {\n        const res = await post('/logout');\n        const data = await res.json();\n        if (!res.ok) throw new LogoutError(data.message, res.status);\n        this.$emit('logout');\n        this.redirect();\n      } catch (e) {\n        this.error = `Unable to logout: ${e.message}`;\n      }\n    },\n\n    redirect() {\n      const to = this.redirectTo ? this.redirectTo : getReferringPage();\n      redirect(to);\n    },\n  },\n};\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.error\n    ? _c(\"div\", [_c(\"p\", [_vm._v(_vm._s(_vm.error))])])\n    : _c(\"div\", [_c(\"p\", [_vm._v(\"Logging out...\")])])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}