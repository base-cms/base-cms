(window["webpackJsonpCMSBrowserComponents"] = window["webpackJsonpCMSBrowserComponents"] || []).push([["marko-web-radix-identity-detector"],{

/***/ "../../node_modules/@babel/runtime/helpers/arrayWithHoles.js":
/*!*******************************************************************!*\
  !*** /root/node_modules/@babel/runtime/helpers/arrayWithHoles.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

module.exports = _arrayWithHoles;

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":
/*!*************************************************************************!*\
  !*** /root/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _iterableToArrayLimit(arr, i) {
  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === "[object Arguments]")) {
    return;
  }

  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;

  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

module.exports = _iterableToArrayLimit;

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/nonIterableRest.js":
/*!********************************************************************!*\
  !*** /root/node_modules/@babel/runtime/helpers/nonIterableRest.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance");
}

module.exports = _nonIterableRest;

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/slicedToArray.js":
/*!******************************************************************!*\
  !*** /root/node_modules/@babel/runtime/helpers/slicedToArray.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var arrayWithHoles = __webpack_require__(/*! ./arrayWithHoles */ "../../node_modules/@babel/runtime/helpers/arrayWithHoles.js");

var iterableToArrayLimit = __webpack_require__(/*! ./iterableToArrayLimit */ "../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js");

var nonIterableRest = __webpack_require__(/*! ./nonIterableRest */ "../../node_modules/@babel/runtime/helpers/nonIterableRest.js");

function _slicedToArray(arr, i) {
  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();
}

module.exports = _slicedToArray;

/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue":
/*!**********************************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _identity_detector_vue_vue_type_template_id_4076c774___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./identity-detector.vue?vue&type=template&id=4076c774& */ "../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=template&id=4076c774&");
/* harmony import */ var _identity_detector_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./identity-detector.vue?vue&type=script&lang=js& */ "../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport *//* harmony import */ var _vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../vue-loader/lib/runtime/componentNormalizer.js */ "../../node_modules/vue-loader/lib/runtime/componentNormalizer.js");





/* normalize component */

var component = Object(_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(
  _identity_detector_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _identity_detector_vue_vue_type_template_id_4076c774___WEBPACK_IMPORTED_MODULE_0__["render"],
  _identity_detector_vue_vue_type_template_id_4076c774___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=script&lang=js&":
/*!***********************************************************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_loader_lib_index_js_ref_1_vue_loader_lib_index_js_vue_loader_options_identity_detector_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../babel-loader/lib??ref--1!../../../vue-loader/lib??vue-loader-options!./identity-detector.vue?vue&type=script&lang=js& */ "../../node_modules/babel-loader/lib/index.js?!../../node_modules/vue-loader/lib/index.js?!../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_babel_loader_lib_index_js_ref_1_vue_loader_lib_index_js_vue_loader_options_identity_detector_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=template&id=4076c774&":
/*!*****************************************************************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=template&id=4076c774& ***!
  \*****************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_identity_detector_vue_vue_type_template_id_4076c774___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../vue-loader/lib??vue-loader-options!./identity-detector.vue?vue&type=template&id=4076c774& */ "../../node_modules/vue-loader/lib/loaders/templateLoader.js?!../../node_modules/vue-loader/lib/index.js?!../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=template&id=4076c774&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_identity_detector_vue_vue_type_template_id_4076c774___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_identity_detector_vue_vue_type_template_id_4076c774___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/send-request.js":
/*!****************************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/send-request.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /root/node_modules/@babel/runtime/helpers/defineProperty */ "../../node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./url */ "../../node_modules/@base-cms/marko-web-radix/browser/url.js");


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }


/* harmony default export */ __webpack_exports__["default"] = (function (_ref) {
  var appId = _ref.appId,
      method = _ref.method,
      endpoint = _ref.endpoint,
      body = _ref.body;
  return fetch("".concat(_url__WEBPACK_IMPORTED_MODULE_1__["default"]).concat(endpoint), _objectSpread({
    method: method,
    headers: _objectSpread({
      'x-radix-appid': appId,
      'x-requested-with': 'XMLHttpRequest'
    }, body && {
      'content-type': 'application/json'
    }),
    cache: 'no-cache',
    credentials: 'same-origin'
  }, body && {
    body: JSON.stringify(body)
  }));
});

/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/url.js":
/*!*******************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/url.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ('https://radix.as3.io');

/***/ }),

/***/ "../../node_modules/babel-loader/lib/index.js?!../../node_modules/vue-loader/lib/index.js?!../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=script&lang=js&":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** /root/node_modules/babel-loader/lib??ref--1!/root/node_modules/vue-loader/lib??vue-loader-options!/root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _root_node_modules_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /root/node_modules/@babel/runtime/helpers/slicedToArray */ "../../node_modules/@babel/runtime/helpers/slicedToArray.js");
/* harmony import */ var _root_node_modules_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_root_node_modules_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _root_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /root/node_modules/@babel/runtime/regenerator */ "../../node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _root_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_root_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _root_node_modules_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! /root/node_modules/@babel/runtime/helpers/asyncToGenerator */ "../../node_modules/@babel/runtime/helpers/asyncToGenerator.js");
/* harmony import */ var _root_node_modules_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_root_node_modules_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _send_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./send-request */ "../../node_modules/@base-cms/marko-web-radix/browser/send-request.js");



//
//
//
//

/* harmony default export */ __webpack_exports__["default"] = ({
  inject: ['EventBus'],
  props: {
    appId: {
      type: String,
      required: true
    }
  },
  data: function data() {
    return {
      identityKey: 'ident[pull]'
    };
  },
  created: function created() {
    this.track();
  },
  methods: {
    track: function () {
      var _track = _root_node_modules_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _root_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {
        var ident, res, json, _ref, identity;

        return _root_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                ident = this.parseIdentityValue();

                if (!ident) {
                  _context.next = 11;
                  break;
                }

                _context.next = 4;
                return Object(_send_request__WEBPACK_IMPORTED_MODULE_3__["default"])({
                  appId: this.appId,
                  method: 'GET',
                  endpoint: "/app/auth?".concat(this.encode(this.identityKey), "=").concat(this.encode(ident))
                });

              case 4:
                res = _context.sent;
                _context.next = 7;
                return res.json();

              case 7:
                json = _context.sent;
                _ref = json || {}, identity = _ref.identity;
                this.EventBus.$emit('radix-identity-detected', identity);

                if (window.Sapience && identity) {
                  window.Sapience.Tracker.setIdentity(identity);
                }

              case 11:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function track() {
        return _track.apply(this, arguments);
      }

      return track;
    }(),
    parseIdentityValue: function parseIdentityValue() {
      var _this = this;

      var search = window.location.search.replace(/(^\?)/, '');
      var pairs = search.split('&');
      var ident;

      for (var i = 0; i < pairs.length; i += 1) {
        var pair = pairs[i];

        var _pair$split$map = pair.split('=').map(function (v) {
          return _this.decode(v);
        }),
            _pair$split$map2 = _root_node_modules_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_pair$split$map, 2),
            key = _pair$split$map2[0],
            value = _pair$split$map2[1];

        if (key === "rdx.".concat(this.identityKey) && value) {
          ident = value;
        }
      }

      return ident;
    },
    decode: function decode(value) {
      return decodeURIComponent(value);
    },
    encode: function encode(value) {
      return encodeURIComponent(value);
    }
  }
});

/***/ }),

/***/ "../../node_modules/vue-loader/lib/loaders/templateLoader.js?!../../node_modules/vue-loader/lib/index.js?!../../node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=template&id=4076c774&":
/*!*******************************************************************************************************************************************************************************************************************************************************!*\
  !*** /root/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/root/node_modules/vue-loader/lib??vue-loader-options!/root/node_modules/@base-cms/marko-web-radix/browser/identity-detector.vue?vue&type=template&id=4076c774& ***!
  \*******************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c("div", {
    staticClass: "radix-identity-detector",
    attrs: { "data-app-id": _vm.appId }
  })
}
var staticRenderFns = []
render._withStripped = true



/***/ })

}]);
//# sourceMappingURL=marko-web-radix-identity-detector.18f9cf91.js.map