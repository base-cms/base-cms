(window["webpackJsonpCMSBrowserComponents"] = window["webpackJsonpCMSBrowserComponents"] || []).push([["marko-web-radix-inquiry-listener"],{

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue":
/*!*********************************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _inquiry_listener_vue_vue_type_template_id_3a6f878e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./inquiry-listener.vue?vue&type=template&id=3a6f878e& */ "../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=template&id=3a6f878e&");
/* harmony import */ var _inquiry_listener_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./inquiry-listener.vue?vue&type=script&lang=js& */ "../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport *//* harmony import */ var _vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../vue-loader/lib/runtime/componentNormalizer.js */ "../../node_modules/vue-loader/lib/runtime/componentNormalizer.js");





/* normalize component */

var component = Object(_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(
  _inquiry_listener_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _inquiry_listener_vue_vue_type_template_id_3a6f878e___WEBPACK_IMPORTED_MODULE_0__["render"],
  _inquiry_listener_vue_vue_type_template_id_3a6f878e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=script&lang=js&":
/*!**********************************************************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_loader_lib_index_js_ref_1_vue_loader_lib_index_js_vue_loader_options_inquiry_listener_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../babel-loader/lib??ref--1!../../../vue-loader/lib??vue-loader-options!./inquiry-listener.vue?vue&type=script&lang=js& */ "../../node_modules/babel-loader/lib/index.js?!../../node_modules/vue-loader/lib/index.js?!../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_babel_loader_lib_index_js_ref_1_vue_loader_lib_index_js_vue_loader_options_inquiry_listener_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=template&id=3a6f878e&":
/*!****************************************************************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=template&id=3a6f878e& ***!
  \****************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_inquiry_listener_vue_vue_type_template_id_3a6f878e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../vue-loader/lib??vue-loader-options!./inquiry-listener.vue?vue&type=template&id=3a6f878e& */ "../../node_modules/vue-loader/lib/loaders/templateLoader.js?!../../node_modules/vue-loader/lib/index.js?!../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=template&id=3a6f878e&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_inquiry_listener_vue_vue_type_template_id_3a6f878e___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_inquiry_listener_vue_vue_type_template_id_3a6f878e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/send-request.js":
/*!****************************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/send-request.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /root/node_modules/@babel/runtime/helpers/defineProperty */ "../../node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./url */ "../../node_modules/@base-cms/marko-web-radix/browser/url.js");


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }


/* harmony default export */ __webpack_exports__["default"] = (function (_ref) {
  var appId = _ref.appId,
      method = _ref.method,
      endpoint = _ref.endpoint,
      body = _ref.body;
  return fetch("".concat(_url__WEBPACK_IMPORTED_MODULE_1__["default"]).concat(endpoint), _objectSpread({
    method: method,
    headers: _objectSpread({
      'x-radix-appid': appId,
      'x-requested-with': 'XMLHttpRequest'
    }, body && {
      'content-type': 'application/json'
    }),
    cache: 'no-cache',
    credentials: 'same-origin'
  }, body && {
    body: JSON.stringify(body)
  }));
});

/***/ }),

/***/ "../../node_modules/@base-cms/marko-web-radix/browser/url.js":
/*!*******************************************************************!*\
  !*** /root/node_modules/@base-cms/marko-web-radix/browser/url.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ('https://radix.as3.io');

/***/ }),

/***/ "../../node_modules/babel-loader/lib/index.js?!../../node_modules/vue-loader/lib/index.js?!../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=script&lang=js&":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** /root/node_modules/babel-loader/lib??ref--1!/root/node_modules/vue-loader/lib??vue-loader-options!/root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! /root/node_modules/@babel/runtime/helpers/defineProperty */ "../../node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _root_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! /root/node_modules/@babel/runtime/helpers/toConsumableArray */ "../../node_modules/@babel/runtime/helpers/toConsumableArray.js");
/* harmony import */ var _root_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_root_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _send_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./send-request */ "../../node_modules/@base-cms/marko-web-radix/browser/send-request.js");



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

//
//
//
//

/* harmony default export */ __webpack_exports__["default"] = ({
  inject: ['EventBus'],
  props: {
    appId: {
      type: String,
      required: true
    },
    standardFields: {
      type: Array,
      default: function _default() {
        return [{
          name: 'firstName',
          radix: 'identity:givenName'
        }, {
          name: 'lastName',
          radix: 'identity:familyName'
        }, {
          name: 'email',
          radix: 'identity:primaryEmail'
        }, {
          name: 'phone',
          radix: 'identity:primaryPhone.number'
        }, {
          name: 'company',
          radix: 'identity:companyName'
        }, {
          name: 'jobTitle',
          radix: 'identity:title'
        }, {
          name: 'postalCode',
          radix: 'identity:primaryAddress.postalCode'
        }, {
          name: 'country',
          radix: 'identity:primaryAddress.countryCode'
        }];
      }
    },

    /**
     * e.g. [{ name: 'comments', id: '57e55318bcf2d6f3c30e0833' }]
     */
    submissionFieldIds: {
      type: Array,
      default: function _default() {
        return [];
      }
    }
  },
  computed: {
    fields: function fields() {
      return [].concat(_root_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(this.standardFields), _root_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(this.submissionFieldIds.filter(function (f) {
        return f.id;
      }).map(function (f) {
        return {
          name: f.name,
          radix: "submission:answers.".concat(f.id)
        };
      })));
    }
  },
  created: function created() {
    var _this = this;

    this.EventBus.$on('inquiry-form-submit', function () {
      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          contentId = _ref.contentId,
          contentType = _ref.contentType,
          payload = _ref.payload;

      var model = {
        identifier: contentId,
        type: "content-".concat(contentType)
      };

      var data = _this.fields.filter(function (_ref2) {
        var name = _ref2.name;
        return payload[name];
      }).reduce(function (o, _ref3) {
        var name = _ref3.name,
            radix = _ref3.radix;
        return _objectSpread({}, o, _root_node_modules_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({}, radix, payload[name]));
      }, {
        'submission:referringHost': "".concat(window.location.protocol, "//").concat(window.location.host),
        'submission:referringHref': window.location.href
      });

      var body = {
        data: data,
        meta: {
          model: model
        },
        notify: {
          enabled: false
        }
      };

      if (model.identifier && model.type) {
        Object(_send_request__WEBPACK_IMPORTED_MODULE_2__["default"])({
          appId: _this.appId,
          method: 'POST',
          endpoint: '/app/submission/inquiry',
          body: body
        });
      }
    });
  },
  methods: {
    getElementValue: function getElementValue(elements, name) {
      var element = elements[name];
      if (!element) return undefined;
      return element.value;
    }
  }
});

/***/ }),

/***/ "../../node_modules/vue-loader/lib/loaders/templateLoader.js?!../../node_modules/vue-loader/lib/index.js?!../../node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=template&id=3a6f878e&":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** /root/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/root/node_modules/vue-loader/lib??vue-loader-options!/root/node_modules/@base-cms/marko-web-radix/browser/inquiry-listener.vue?vue&type=template&id=3a6f878e& ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c("div", {
    staticClass: "radix-inquiry-listener",
    attrs: { "data-app-id": _vm.appId }
  })
}
var staticRenderFns = []
render._withStripped = true



/***/ })

}]);
//# sourceMappingURL=marko-web-radix-inquiry-listener.9ad402a3.js.map